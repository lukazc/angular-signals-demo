<div class="beer-list">
    <!-- Filter Controls -->
    <app-filter-container class="beer-list__filters" />
    
    @if (store.loading()) {
    <div class="beer-list__loading">
        <mat-spinner diameter="64"></mat-spinner>
        <p class="beer-list__loading-text">Loading beers...</p>
    </div>
    } @else if (store.error()) {
    <div class="beer-list__error">
        <mat-icon class="beer-list__error-icon">error_outline</mat-icon>
        <h2 class="beer-list__error-title">Oops! Something went wrong</h2>
        <p class="beer-list__error-message">{{ store.error() }}</p>
        <button [matButton]="'elevated'" color="primary" class="beer-list__retry-btn" (click)="onRetry()">
            <mat-icon>refresh</mat-icon>
            Try Again
        </button>
    </div>
    } @else if (store.isEmpty()) {
    <div class="beer-list__empty">
        <mat-icon class="beer-list__empty-icon">
            {{ getEmptyIcon() }}
        </mat-icon>
        <h2 class="beer-list__empty-title">{{ getEmptyTitle() }}</h2>
        <p class="beer-list__empty-message">{{ store.emptyMessage() }}</p>

        @if (store.filterMode() === 'all' && (store.searchTerm() || store.abvRange().min !== null ||
        store.abvRange().max !== null)) {
        <button [matButton]="'elevated'" color="primary" class="beer-list__clear-btn" (click)="onClearFilters()">
            <mat-icon>clear</mat-icon>
            Clear Filters
        </button>
        }
    </div>
    } @else {
    <div class="beer-list__grid">
        @for (beer of store.displayedBeers(); track beer.id) {
        <app-beer-card [beer]="beer" [isFavorite]="store.isFavorite(beer.id)" (detailsClicked)="onDetailsClick($event)"
            (favoriteToggled)="onFavoriteToggle($event)" />
        }
    </div>

    @if (store.filterMode() === 'all') {
    <div class="beer-list__pagination">
        <button matButton class="beer-list__pagination-btn" [disabled]="store.currentPage() === 1"
            (click)="onPreviousPage()" aria-label="Go to previous page">
            <mat-icon>chevron_left</mat-icon>
            Previous
        </button>

        <span class="beer-list__page-indicator">
            Page {{ store.currentPage() }}
        </span>

        <button matButton class="beer-list__pagination-btn" [disabled]="store.displayedBeers().length < 25"
            (click)="onNextPage()" aria-label="Go to next page">
            Next
            <mat-icon>chevron_right</mat-icon>
        </button>
    </div>
    }
    }
</div>